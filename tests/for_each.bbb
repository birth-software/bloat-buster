require = fn (ok: u1) void
{
    if (!ok) #trap();
}

[export] main = fn [cc(c)] () s32
{
    >array: [_]u32 = [5, 3, 2];
    >counter: u32 = 0;
    for (e : array)
    {
        counter += e;
    }

    require(counter == 10);

    for (&e : array)
    {
        e.& += 1;
    }

    >new_counter: u32 = 0;

    for (e : array)
    {
        new_counter += e;
    }

    require(new_counter == counter + array.length);

    return 0;
}
